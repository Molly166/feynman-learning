# 百度千帆 API 配额限制说明

## ⚠️ 当前问题

你遇到了百度千帆 API 的每日请求限制：
- **错误代码**: 17
- **错误信息**: "Open api daily request limit reached"
- **含义**: API 每日请求次数已达上限

## 🔍 问题原因

百度千帆 API 对免费用户有每日请求次数限制。当你：
1. 创建知识点时（需要调用 Embedding API 进行向量化）
2. 在 AI 助手提问时（需要调用 Embedding API 进行检索 + Chat API 生成回答）

每次操作都会消耗 API 配额。如果配额用完了，就会出现这个错误。

## 💡 解决方案

### 方案一：等待配额重置（推荐用于测试）

- 百度千帆的每日配额会在 **每天 00:00** 重置
- 等待到明天再试即可

### 方案二：升级 API 配额

1. 登录 [百度智能云控制台](https://console.bce.baidu.com/)
2. 进入 **千帆大模型平台**
3. 查看 **配额管理** 或 **套餐管理**
4. 升级到更高配额的套餐

### 方案三：优化使用方式（减少 API 调用）

1. **批量创建知识点**
   - 一次性创建多个知识点，而不是频繁创建单个知识点
   - 这样可以减少 API 调用次数

2. **减少测试次数**
   - 在测试时，避免频繁提问
   - 每次提问都会调用 Embedding API（检索）和 Chat API（生成）

3. **使用已有的向量数据库**
   - 如果向量数据库已经创建，检索时仍需要调用 Embedding API
   - 但至少不需要重新创建向量索引

## 📊 配额消耗说明

### 创建知识点时的消耗

- **Embedding API**: 每个知识点根据内容长度，可能调用 1-N 次
  - 内容被分割成多个文本块
  - 每个文本块需要调用一次 Embedding API

### AI 助手提问时的消耗

- **Embedding API**: 1 次（将问题转换为向量进行检索）
- **Chat API**: 1 次（生成回答）

## 🎯 当前状态

根据你的错误日志：
- ✅ 向量数据库已成功创建（之前创建的知识点已索引）
- ❌ 当前无法创建新的知识点（配额用完）
- ❌ 当前无法使用 AI 助手（检索和生成都需要 API 调用）

## 🔄 临时解决方案

如果急需测试功能，可以：

1. **使用已有的向量数据库**
   - 如果之前已经成功创建了知识点和向量数据库
   - 可以等待配额重置后再测试 AI 助手

2. **检查配额使用情况**
   - 登录百度智能云控制台
   - 查看 API 调用统计
   - 了解配额使用情况

## 📝 注意事项

- 免费套餐通常有较严格的限制
- 建议在生产环境中使用付费套餐
- 开发测试时注意控制 API 调用频率

## 🆘 如果配额重置后仍有问题

1. 检查 API Key 和 Secret Key 是否正确
2. 确认账户状态正常
3. 查看百度智能云控制台的错误日志
4. 联系百度智能云客服

---

**提示**: 这是 API 配额限制问题，不是代码问题。代码已经正确实现，只需要等待配额重置或升级套餐即可。

