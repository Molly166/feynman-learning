# 🚀 费曼学习平台启动说明

## 快速启动（推荐）

### 方法一：使用启动脚本
1. **双击 `安装依赖.bat`** - 安装所有必要的依赖包
2. **双击 `启动项目.bat`** - 自动启动后端和前端服务
3. **双击 `启动Whisper.bat`** - 启动语音识别服务（可选）

### 方法二：手动启动

## 📋 完整启动步骤

### 第一步：启动Node.js后端服务
```bash
# 打开第一个命令行窗口
cd feynman-platform-backend
node index.js
```
**预期输出：**
```
MongoDB connected successfully!
Server running at http://localhost:3000
```

### 第二步：启动React前端服务
```bash
# 打开第二个命令行窗口
cd feynman-platform-frontend
npm run dev
```
**预期输出：**
```
  VITE v7.1.7  ready in 1234 ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
```

### 第三步：启动Whisper API服务（可选）
```bash
# 打开第三个命令行窗口
cd feynman-platform-whisper-api
pip install flask openai-whisper torch torchaudio
python app.py
```
**预期输出：**
```
正在加载Whisper模型...
模型加载完毕！
启动Whisper API服务...
服务地址: http://localhost:5001
```

## 🌐 访问地址

- **前端应用**: http://localhost:5173
- **后端API**: http://localhost:3000
- **Whisper API**: http://localhost:5001

## 🔧 功能测试

### 基础功能测试
1. 访问 http://localhost:5173
2. 注册新用户
3. 登录系统
4. 创建知识点
5. 编辑知识点

### 语音功能测试
1. 确保Whisper API服务已启动
2. 点击知识点的"语音学习"按钮
3. 录制语音
4. 查看转录结果

## ❗ 常见问题

### 1. 连接被拒绝错误
**问题**: `ERR_CONNECTION_REFUSED`
**解决**: 确保后端服务已启动（端口3000）

### 2. 前端无法加载
**问题**: 前端页面空白或错误
**解决**: 检查前端服务是否在端口5173运行

### 3. 语音功能不可用
**问题**: 录音或转录失败
**解决**: 确保Whisper API服务已启动（端口5001）

### 4. 数据库连接失败
**问题**: MongoDB连接错误
**解决**: 检查.env文件中的MONGO_URI配置

## 📁 项目结构

```
D:\FeynmanLearning\
├── feynman-platform-backend\     # Node.js后端
├── feynman-platform-frontend\    # React前端
├── feynman-platform-whisper-api\ # Python Whisper API
├── 启动项目.bat                 # 快速启动脚本
├── 启动Whisper.bat              # Whisper启动脚本
└── 项目启动说明.md              # 本文档
```

## 🎯 服务状态检查

### 检查后端服务
```bash
curl http://localhost:3000
# 应该返回: Feynman Platform backend is running
```

### 检查前端服务
访问 http://localhost:5173 应该看到登录页面

### 检查Whisper服务
```bash
curl http://localhost:5001/health
# 应该返回: {"status": "healthy", "model": "whisper-base"}
```

## 🚨 故障排除

### 端口占用问题
如果端口被占用，可以修改端口：
- 后端：修改 `feynman-platform-backend/index.js` 中的 `port` 变量
- 前端：修改 `feynman-platform-frontend/vite.config.js` 中的 `server.port`
- Whisper：修改 `feynman-platform-whisper-api/app.py` 中的 `port=5001`

### 依赖安装问题
```bash
# 后端依赖
cd feynman-platform-backend
npm install

# 前端依赖
cd feynman-platform-frontend
npm install

# Python依赖
cd feynman-platform-whisper-api
pip install flask openai-whisper torch torchaudio
```

## ✅ 启动成功标志

当所有服务正常启动后，您应该看到：
1. 后端控制台显示 "Server running at http://localhost:3000"
2. 前端控制台显示 "Local: http://localhost:5173/"
3. Whisper控制台显示 "服务地址: http://localhost:5001"
4. 浏览器可以正常访问 http://localhost:5173
